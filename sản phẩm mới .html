<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop cầu lông</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="css.css">
</head>

<body>
    <!-- Đăng xuất và hiển thị người dùng -->
    <button id="logout" onclick="logout()">Đăng Xuất</button>
    <span id="username-display" class="hidden"></span>
    
    <!-- Đăng nhập / Đăng ký form -->
    <div id="auth">
        <h2 id="auth-title">Đăng Nhập</h2>
        <form id="auth-form"></form>
        <form id="auth-form" onsubmit="handleAuth(event)">
            <input type="text" id="username" placeholder="Tên đăng nhập" required>
            <input type="password" id="password" placeholder="Mật khẩu" required>
            <button type="submit">Đăng Nhập</button>
        </form>
        <p id="auth-toggle">Chưa có tài khoản? <a href="#" onclick="toggleAuth()">Đăng Ký</a></p>
        </div>
        
        <!-- Nội dung chính của trang -->
        <div id="main-content" class="hidden">
            <h1><a href="#">Shop cầu lông</a></h1>
            <br><br><br><br><br>
            <nav>
                <div class="container mt-3">
                    <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
                        <div class="container-fluid">
                            <a class="navbar-brand" href="javascript:void(0)"></a>
                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mynavbar">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="collapse navbar-collapse" id="mynavbar">
                                <ul class="navbar-nav me-auto">
                                    <li class="nav-item">
                                        <a class="nav-link" href="javascript:void(5)">Trang chủ</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="javascript:void(0)">Liên hệ</a>
                                    </li>
                                    <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Sản phẩm</a>
                                        <ul class="dropdown-menu">
                                            <li><a class="dropdown-item" href="trang vợt.html">Vợt</a></li>
                                            <li><a class="dropdown-item" href="trang giày.html">Giày</a></li>
                                            <li><a class="dropdown-item" href="trang quần áo.html">Quần áo</a></li>
                                            
                                    </li>      
            </nav>
            <!-- Phần tìm kiếm và giỏ hàng -->
            <div id="cart-container">
                <form class="d-flex me-2">
                    <input class="form-control me-2" type="text" id="search-input" placeholder="Tìm kiếm">
                    <button class="btn btn-primary" type="button" onclick="searchProducts()">Tìm kiếm</button>
                </form>
                <i class="fas fa-shopping-cart cart-icon" onclick="toggleCart()"></i>
            </div>
    
            <!-- Phần giỏ hàng -->
            <div id="cart-section">
                <h2>Giỏ Hàng</h2>
                <div id="cart-items">
                    <p>Giỏ hàng đang trống</p>
                </div>
                <button id="checkout" onclick="checkout()">Thanh toán</button>
            </div>
            <!-- Danh sách sản phẩm -->
            <div id="products" class="products">
                
                <div class="product">
                    <p><img src="vot-cau-long-victor-one-piece-sandai-kitetsu.webp" alt="" width="150px"></p>
                    <h2>Set vợt cầu lông victor sandai kitetsu</h2>
                    <p>Giá: <span class="price">4,800,000 VND</span></p>
                    <button onclick="addToCart(this, 'Set vợt cầu lông victor sandai kitetsu', 4800000)">Thêm vào giỏ hàng</button>
                </div>
                <div class="product">
                    <p><img src="vot-cau-long-victor-one-piece-wado-ichimonji.webp" alt="" width="150px"></p>
                    <h2>Set vợt cầu lông victor wado Ichimonji</h2>
                    <p>Giá: <span class="price">4,800,000 VND</span></p>
                    <button onclick="addToCart(this, 'Set vợt cầu lông victor wado Ichimonji', 4800000)">Thêm vào giỏ hàng</button>
                </div>
                <div class="product">
                    <p><img src="vot-cau-long-victor-thruster-ryuga.webp" alt="" width="150px"></p>
                    <h2>Vợt cầu lông victor Thruster Ryuga</h2>
                    <p>Giá: <span class="price">3,000,000 VND</span></p>
                    <button onclick="addToCart(this, 'Vợt cầu lông victor Thruster Ryuga', 3000000)">Thêm vào giỏ hàng</button>
                </div>
               
                <div class="product">
                    <p><img src="vot-cau-long-victor-auraspeed-hs-plus.webp" alt="" width="150px"></p>
                    <h2>Vợt Cầu Lông Victor Auraspeed HS Plus - Xách Tay</h2>
                    <p>Giá: <span class="price">4.250,000 VND</span></p>
                    <button onclick="addToCart(this, 'Vợt Cầu Lông Victor Auraspeed HS Plus - Xách Tay', 4250000)">Thêm vào giỏ hàng</button>
                </div>
                <div class="product">
                    <p><img src="set-vot-cau-long-victor-iron-man-gb-chinh-hang_1717958958.webp" alt="" width="150px"></p>
                    <h2>Set Vợt Cầu Lông Victor Iron Man Metallic (Nội Địa Trung)
                    </h2>
                    <p>Giá: <span class="price">5,580,000 VND</span></p>
                    <button onclick="addToCart(this, 'Set Vợt Cầu Lông Victor Iron Man Metallic (Nội Địa Trung)', 5580000)">Thêm vào giỏ hàng</button>
                </div>
            </div>
            
        </div>
        <footer>
            <div class="cuoi">
                <div class="cuoi1">
                    <div class="boxfooter2">
                        <h3>LIÊN HỆ</h3>
                        <p class="colorc">Hà Đông - Hà Nội</p>
                        <p class="colorc"><img src="mail.png" alt="" width="50px">long102@gmail.com</p>
                        <a href="https://www.facebook.com/profile.php?id=100030728164254"><img src="fb.png" alt="" width="50px"></a>
                        <p class="colorc">Liên hệ: 0123456789</p>

                    </div>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <div class="boxfooter3">
                        <h3>BẢN ĐỒ</h3>    
                        <img src="bando.jpg" alt="Bản đồ" width="600x200">
                    </div>
                </div>
            </div>
        </footer>
        
        
        <!-- JavaScript -->
        <script>
            let cart = [];
        
            document.addEventListener('DOMContentLoaded', () => {
                checkAuth();
            });
        
            function checkAuth() {
                const user = localStorage.getItem('user');
                if (user) {
                    document.getElementById('auth').style.display = 'none';
                    document.getElementById('logout').style.display = 'block';
                    document.getElementById('username-display').textContent = user;
                    document.getElementById('username-display').classList.remove('hidden');
                    document.getElementById('main-content').classList.remove('hidden');
                } else {
                    document.getElementById('auth').style.display = 'block';
                    document.getElementById('logout').style.display = 'none';
                    document.getElementById('username-display').classList.add('hidden');
                    document.getElementById('main-content').classList.add('hidden');
                }
            }
        
            function handleAuth(event) {
                event.preventDefault();
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
        
                const authTitle = document.getElementById('auth-title').textContent;
        
                if (authTitle === 'Đăng Nhập') {
                    const user = JSON.parse(localStorage.getItem(username));
                    if (user && user.password === password) {
                        localStorage.setItem('user', username);
                        checkAuth();
                    } else {
                        alert('Tên đăng nhập hoặc mật khẩu không đúng');
                    }
                } else {
                    if (localStorage.getItem(username)) {
                        alert('Tên đăng nhập đã tồn tại. Vui lòng chọn tên khác.');
                    } else {
                        localStorage.setItem(username, JSON.stringify({ password }));
                        document.getElementById('auth-title').textContent = 'Đăng Nhập';
                        document.getElementById('auth-form').reset();
                        toggleAuth();
                    }
                }
            }
        
            function toggleAuth() {
                const authTitle = document.getElementById('auth-title').textContent;
                const authToggle = document.getElementById('auth-toggle');
        
                if (authTitle === 'Đăng Nhập') {
                    document.getElementById('auth-title').textContent = 'Đăng Ký';
                    authToggle.innerHTML = 'Đã có tài khoản? <a href="#" onclick="toggleAuth()">Đăng Nhập</a>';
                } else {
                    document.getElementById('auth-title').textContent = 'Đăng Nhập';
                    authToggle.innerHTML = 'Chưa có tài khoản? <a href="#" onclick="toggleAuth()">Đăng Ký</a>';
                }
        
                document.getElementById('auth-form').reset();
            }
        
            function logout() {
                localStorage.removeItem('user');
                checkAuth();
            }
        
            function addToCart(button, productName, price) {
                cart.push({ productName, price });
                updateCart();
                animateProduct(button);
            }
        
            function updateCart() {
                const cartDiv = document.getElementById('cart-items');
                cartDiv.innerHTML = '';
        
                if (cart.length === 0) {
                    cartDiv.innerHTML = '<p>Giỏ hàng đang trống</p>';
                    document.getElementById('checkout').style.display = 'none';
                } else {
                    let total = 0;
                    cart.forEach(item => {
                        const itemDiv = document.createElement('div');
                        itemDiv.classList.add('product');
                        itemDiv.innerHTML = `
                            <h3>${item.productName}</h3>
                            <p>Giá: <span class="price">${item.price} VND</span></p>
                        `;
                        cartDiv.appendChild(itemDiv);
                        total += item.price;
                    });
        
                    const totalDiv = document.createElement('div');
                    totalDiv.innerHTML = `<hr><p>Tổng cộng: <span class="price">${total} VND</span></p>`;
                    cartDiv.appendChild(totalDiv);
        
                    document.getElementById('checkout').style.display = 'block';
                }
            }
        
            function checkout() {
                alert('Xin chào ' + localStorage.getItem('user') + ', bạn đã thanh toán thành công.');
                cart = [];
                updateCart();
            }
        
            function animateProduct(button) {
                const flyingDiv = document.createElement('div');
                flyingDiv.classList.add('flying');
                flyingDiv.textContent = 'Đã thêm vào giỏ hàng';
                document.body.appendChild(flyingDiv);
        
                const buttonCoords = button.getBoundingClientRect();
                const cartCoords = document.getElementById('cart-section').getBoundingClientRect();
        
                flyingDiv.style.top = buttonCoords.top + 'px';
                flyingDiv.style.left = buttonCoords.left + 'px';
        
                setTimeout(() => {
                    flyingDiv.style.transform = `translate(${cartCoords.left - buttonCoords.left}px, ${cartCoords.top - buttonCoords.top}px)`;
                    flyingDiv.style.opacity = 0;
                }, 50);
        
                setTimeout(() => {
                    flyingDiv.remove();
                }, 1000);
            }
        
            function toggleCart() {
                const cartSection = document.getElementById('cart-section');
                cartSection.classList.toggle('show');
            }
        
            function searchProducts() {
                const searchInput = document.getElementById('search-input').value.toLowerCase();
                const products = document.querySelectorAll('.product');
        
                products.forEach(product => {
                    const productName = product.querySelector('h2').textContent.toLowerCase();
                    if (productName.includes(searchInput)) {
                        product.style.display = 'block';
                    } else {
                        product.style.display = 'none';
                    }
                });
            }
        </script>
        </body>
        </html>
        